<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lisensi API</title>
</head>
<body>
    <h1>Tambah Lisensi</h1>
    
    <label for="license">Masukkan Lisensi:</label>
    <input type="text" id="license" placeholder="Masukkan lisensi di sini">
    <button onclick="addLicense()">Tambah Lisensi</button>

    <div id="response-message"></div> <!-- Menampilkan pesan hasil -->

    <script>
        async function addLicense() {
            let license = document.getElementById('license').value;
            let responseMessage = document.getElementById('response-message');

            // Validasi input lisensi
            if (!license) {
                responseMessage.textContent = 'Lisensi tidak boleh kosong';
                responseMessage.style.color = 'red';
                return;
            }

            try {
                const response = await fetch('/api/addLicense', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ license })
                });

                const data = await response.json();

                if (data.success) {
                    responseMessage.textContent = data.message;
                    responseMessage.style.color = 'green';
                } else {
                    responseMessage.textContent = data.message || 'Gagal menambahkan lisensi.';
                    responseMessage.style.color = 'red';
                }
            } catch (error) {
                console.error('Error saat mengirim permintaan:', error);
                responseMessage.textContent = 'Terjadi kesalahan saat menghubungi server.';
                responseMessage.style.color = 'red';
            }
        }
    </script>
</body>
</html>
